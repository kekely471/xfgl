<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ureport模块</title>
    <script src="${ctx.contextPath}/layui/commons/main.js" type="text/javascript"></script>
</head>
<body class="layui-layout-body">
    <div style="padding: 15px;">
        <div style="overflow: hidden;">
            <div class="layui-inline" style="margin-bottom:5px;margin-right:0;">
                <label class="layui-form-label">关键字：</label>
                <div class="layui-input-inline" style="width: 160px;">
                    <input type="text" class="layui-input" id="key_name"  style="width: 160px;">
                </div>
                <div class="layui-btn-group">
                    <button class="layui-btn" id="query" onclick="search()">查询</button>
                    <button class="layui-btn layui-btn-edit" id="edit" onclick="edit()">编辑</button>
                </div>
            </div>
        </div>
    </div>
    <!--报表区域-->
    <div style="width: 100%;height:500px">
        <iframe id="iframe" scrolling="yes" frameborder="0"  src="${ctx.contextPath}/ureport/preview?_u=file:demo.ureport.xml&_i=1"	style="width:100%;height:100%;"></iframe>
    </div>
<script>

    var table,tableIns,openType=2;
    var tabIndex = top.$(".layui-tab-title li.layui-this").attr("lay-id");  //获取当前tab Id
    var keyname = $("#key_name").val();

    function search() {
        var src = "${ctx.contextPath}/ureport/preview?_u=file:demo.ureport.xml&_i=1&key_name=" + keyname;
        $("#iframe").attr('src',src);
    }
    function edit() {
        var param={ title:"编辑报表模板",content:"${ctx.contextPath}/ureport/designer?_u=file:demo.ureport.xml#"};
        openPage(openType,"edit",param);
    }
</script>
</body>
</html>