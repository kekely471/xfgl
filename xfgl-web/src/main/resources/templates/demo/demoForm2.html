<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="${ctx.contextPath}/layui/commons/main.js" type="text/javascript"></script>
    <script src="${ctx.contextPath}/layui/commons/ztree/js/opentree.js" type="text/javascript"></script>
    <script src="${ctx.contextPath}/layui/commons/kindeditor/kindeditor.js" type="text/javascript"></script>
    <script src="${ctx.contextPath}/layui/commons/kindeditor/lang/zh_CN.js" type="text/javascript"></script>
    <title>Title</title>
</head>
<style>
    .layui-form-pane .layui-form-label{width:130px;}
    .layui-form-pane .layui-input-block{margin-left: 130px;}
    .select-tree input{border:0;border-left:1px solid #e6e6e6;}
</style>
<body style="background: #f2f2f2;">
<div class="contentBox">
    <div class="formBox">
        <form class="layui-form layui-form-pane" action="">
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
                <legend>表单集合演示</legend>
            </fieldset>

            <div class="layui-form-item layui-td-1">
                <label class="layui-form-label"><span class="redLabel">*</span>验证必填项</label>
                <div class="layui-input-block">
                    <input type="text" name="username" lay-verify="required" placeholder="请输入"  value="" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" style="width: 47%;">
                <label class="layui-form-label">验证手机</label>
                <div class="layui-input-block">
                    <input type="text" name="phone" lay-verify="phone" placeholder="请输入"  value="" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" style="width: 47%;margin-left: 6%;">
                <label class="layui-form-label">验证邮箱</label>
                <div class="layui-input-block">
                    <input type="text" name="email" lay-verify="email" placeholder="请输入"  value="" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" style="width: 30%;">
                <label class="layui-form-label">多规则验证</label>
                <div class="layui-input-block">
                    <input type="text" name="" lay-verify="required|number" placeholder="请输入"  value="" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" style="width: 30%;margin-left: 5%;">
                <label class="layui-form-label">验证日期</label>
                <div class="layui-input-block">
                    <input type="text" id="date" name="date" lay-verify="date" readonly placeholder="请选择日期"  value="" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item" style="width: 30%;margin-left: 5%;">
                <label class="layui-form-label">验证身份证</label>
                <div class="layui-input-block">
                    <input type="text" name="" lay-verify="identity" placeholder="请输入"  value="" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item layui-td-1">
                <label class="layui-form-label">自定义验证</label>
                <div class="layui-input-inline">
                    <input type="text" name="" lay-verify="pass" placeholder="请输入"  value="" autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请填写6到12位密码</div>
            </div>
            <div class="layui-form-item" pane="" style="width: 47%;">
                <label class="layui-form-label">部门人员下拉树</label>
                <div class="layui-input-block" id="bmry">

                </div>
            </div>
            <div class="layui-form-item" pane="" style="width: 47%;margin-left: 6%;">
                <label class="layui-form-label">部门下拉树</label>
                <div class="layui-input-block" id="bm">

                </div>
            </div>
            <div class="layui-form-item" pane="" style="width: 47%;">
                <label class="layui-form-label">部门人员树</label>
                <div class="layui-input-block">
                    <div id="demo" class="layui-form-select select-tree"></div>
                </div>
            </div>
            <div class="layui-form-item" pane="" style="width: 47%;margin-left: 6%;">
                <label class="layui-form-label">部门树</label>
                <div class="layui-input-block">
                    <div id="demo1" class="layui-form-select select-tree"></div>
                </div>
            </div>
            <div class="layui-form-item layui-td-1">
                <label class="layui-form-label">单行选择框</label>
                <div class="layui-input-block">
                    <select name="interest" lay-filter="aihao">
                        <option value=""></option>
                        <option value="0">写作</option>
                        <option value="1" selected="">阅读</option>
                        <option value="2">游戏</option>
                        <option value="3">音乐</option>
                        <option value="4">旅行</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item" style="width: 47%;">
                <label class="layui-form-label">分组选择框</label>
                <div class="layui-input-block">
                    <select name="quiz">
                        <option value="">请选择问题</option>
                        <optgroup label="城市记忆">
                            <option value="你工作的第一个城市">你工作的第一个城市</option>
                        </optgroup>
                        <optgroup label="学生时代">
                            <option value="你的工号">你的工号</option>
                            <option value="你最喜欢的老师">你最喜欢的老师</option>
                        </optgroup>
                    </select>
                </div>
            </div>
            <div class="layui-form-item" style="width: 47%;margin-left: 6%;">
                <label class="layui-form-label">搜索选择框</label>
                <div class="layui-input-block">
                    <select name="modules" lay-verify="required" lay-search="">
                        <option value="">直接选择或搜索选择</option>
                        <option value="1">layer</option>
                        <option value="2">form</option>
                        <option value="3">layim</option>
                        <option value="4">element</option>
                        <option value="5">laytpl</option>
                        <option value="6">upload</option>
                        <option value="7">laydate</option>
                        <option value="8">laypage</option>
                        <option value="9">flow</option>
                        <option value="10">util</option>
                        <option value="11">code</option>
                        <option value="12">tree</option>
                        <option value="13">layedit</option>
                        <option value="14">nav</option>
                        <option value="15">tab</option>
                        <option value="16">table</option>
                        <option value="17">select</option>
                        <option value="18">checkbox</option>
                        <option value="19">switch</option>
                        <option value="20">radio</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item layui-td-1" pane="">
                <label class="layui-form-label">复选框</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="like[write]" title="写作">
                    <input type="checkbox" name="like[read]" title="阅读" checked="">
                    <input type="checkbox" name="like[game]" title="游戏">
                </div>
            </div>
            <div class="layui-form-item layui-td-1" pane="">
                <label class="layui-form-label">原始复选框</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="like1[write]" lay-skin="primary" title="写作" checked="">
                    <input type="checkbox" name="like1[read]" lay-skin="primary" title="阅读">
                    <input type="checkbox" name="like1[game]" lay-skin="primary" title="游戏" disabled="">
                </div>
            </div>
            <div class="layui-form-item" pane="" style="width: 47%;">
                <label class="layui-form-label">开关-默认关</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="close" lay-skin="switch" lay-text="ON|OFF">
                </div>
            </div>
            <div class="layui-form-item" pane="" style="width: 47%;margin-left: 6%;">
                <label class="layui-form-label">开关-默认开</label>
                <div class="layui-input-block">
                    <input type="checkbox" checked="" name="open" lay-skin="switch" lay-filter="switchTest" lay-text="ON|OFF">
                </div>
            </div>
            <div class="layui-form-item layui-td-1" pane="">
                <label class="layui-form-label">单选框</label>
                <div class="layui-input-block">
                    <input type="radio" name="sex" value="男" title="男" checked="">
                    <input type="radio" name="sex" value="女" title="女">
                    <input type="radio" name="sex" value="禁" title="禁用" disabled="">
                </div>
            </div>
            <div class="layui-form-item layui-td-1" pane="">
                <label class="layui-form-label">富文本编辑器</label>
                <div class="layui-input-block">
                    <textarea id="hyjd" name="hyjd" style="width:100%;height:180px;"></textarea>
                </div>
            </div>
            <div class="layui-form-item layui-td-1">
                <button type="button" class="layui-btn" id="update_pic">
                    <i class="layui-icon">&#xe67c;</i>上传图片
                </button>
                <ul class="viewer" id='viewer'></ul>
            </div>
            <div class="layui-form-item layui-td-1">
                <button type="button" class="layui-btn" id="update_pic1">
                    <i class="layui-icon">&#xe67c;</i>上传文件
                </button>
                <ul class="viewer" id='viewer1'></ul>
            </div>
            <div class="layui-form-item layui-layout-admin">
                <div class="layui-input-block">
                    <div class="layui-footer" style="left: 0;">
                        <button class="layui-btn" lay-submit="" lay-filter="component-form-demo1">立即提交</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>
            </div>
            <div class="layui-form-item layui-layout-admin">
                <div class="layui-input-block">
                    <div class="layui-footer" style="left: 0;">
                        <button class="layui-btn" lay-submit="" lay-filter="component-form-demo1">立即提交</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>
            </div>
            <div class="clear"></div>
        </form>
    </div>
</div>


<script>
    var index = parent.layer.getFrameIndex(window.name);
    KindEditor.ready(function(K) {
        window.editor_hyjd = K.create('#hyjd');
    });
    layui.use(['form', 'layedit', 'laydate','upload'], function() {
        var form = layui.form
            ,layer = layui.layer
            ,layedit = layui.layedit
            ,laydate = layui.laydate
            ,upload = layui.upload;
        //日期
        laydate.render({
            elem: '#date'
        });

        //自定义验证规则
        form.verify({
            title: function(value){
                if(value.length < 5){
                    return '标题至少得5个字符啊';
                }
            }
            ,pass: [
                /^[\S]{6,12}$/
                ,'密码必须6到12位，且不能出现空格'
            ]
            ,content: function(value){
                layedit.sync(editIndex);
            }
        });
        initupload("update_pic","viewer",true,upload);//初始化图片
        initupload("update_pic1","viewer1",true,upload,"file");//初始化文件
        getTreeData();//初始化下拉树
        getTreeData1();
        $("#bmry").openTree({
            idKey:'ID',
            css:'border:0',
            pIdKey:'PID',
            nameKey:'NAME',
            title:'部门人员树',
            treeUrl:'dept/userTree'
        });
        $("#bm").openTree({
            idKey:'ID',
            css:'border:0',
            pIdKey:'PARENTID',
            nameKey:'NAME',
            title:'部门树',
            treeUrl:'common/zTree/list',
            ajax_par:{"tableid":"ss_dept"}
        });
    });

    //初始化下拉树
    function getTreeData(){
        var ajax = new Ajax("dept/userTree",function(data){
            if(judgeRight(data)){
                var zNodes=data.dataset.rows;
                initSelectTree("demo", true,zNodes,{"Y": "ps", "N": "s"});
            }
        });
        ajax.submit();
    }
    function getTreeData1(){
        var ajax = new Ajax("common/zTree/list",function(data){
            if(judgeRight(data)){
                var zNodes=data.dataset.rows;
                initSelectTree("demo1", true,zNodes, {"Y": "ps", "N": "s"},"ID","PARENTID");
            }
        });
        ajax.add('tableid','ss_dept');
        ajax.submit();
    }


</script>
</body>

</html>